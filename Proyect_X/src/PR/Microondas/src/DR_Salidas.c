/*******************************************************************************************************************************//**
 *
 * @file		DR_Salidas.c
 * @brief		Descripcion del modulo
 * @date		14 de nov. de 2017
 * @author		Ing. Marcelo Trujillo
 *
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** INCLUDES
 **********************************************************************************************************************************/
#include "DR_Salidas.h"

/***********************************************************************************************************************************
 *** DEFINES PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** MACROS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TIPOS DE DATOS PRIVADOS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** TABLAS PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PUBLICAS
 **********************************************************************************************************************************/
volatile uint32_t BufferSalidas;		//!< Buffer de las salidas de los relays

/***********************************************************************************************************************************
 *** VARIABLES GLOBALES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

/***********************************************************************************************************************************
 *** PROTOTIPO DE FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES PRIVADAS AL MODULO
 **********************************************************************************************************************************/

 /***********************************************************************************************************************************
 *** FUNCIONES GLOBALES AL MODULO
 **********************************************************************************************************************************/
/**
	\fn  void RefrescoSalidas ( void )
	\brief Refresca el estadp de las salidas delos relays
 	\author Ing. Marcelo Trujillo
 	\date 14 de nov. de 2017
 	\param void
 	\return void
*/
void RefrescoSalidas ( void )
{
	SetPin ( OUT0 , ( BufferSalidas >> 0 ) & 1 );
	SetPin ( OUT1 , ( BufferSalidas >> 1 ) & 1 );
	SetPin ( OUT2 , ( BufferSalidas >> 2 ) & 1 );
	SetPin ( OUT3 , ( BufferSalidas >> 3 ) & 1 );
}

/**
	\fn  void InicializarSalidas( void )
	\brief Configura las salidas de los relays
 	\author Ing. Marcelo Trujillo
 	\date 14 de nov. de 2017
 	\param void
 	\return void
*/
void InicializarSalidas( void )
{
	//!< Inicializar Salidas Digitales
	SetPinsel(OUT_BUZZER,PINSEL_GPIO);
	SetPinsel(INFOTRONIC_BLUE,PINSEL_GPIO);
	SetPinsel(INFOTRONIC_GREEN,PINSEL_GPIO);
	SetPinsel(INFOTRONIC_RED,PINSEL_GPIO);

	SetPinsel(OUT0,PINSEL_GPIO);
	SetPinsel(OUT1,PINSEL_GPIO);
	SetPinsel(OUT2,PINSEL_GPIO);
	SetPinsel(OUT3,PINSEL_GPIO);

	//Salidas Para Placa Infotronic
	SetPinDir( OUT_BUZZER , PINDIR_OUTPUT);
	SetPinDir( INFOTRONIC_BLUE , PINDIR_OUTPUT);
	SetPinDir( INFOTRONIC_GREEN , PINDIR_OUTPUT);
	SetPinDir( INFOTRONIC_RED , PINDIR_OUTPUT);

	SetPinDir( OUT0 , PINDIR_OUTPUT);
	SetPinDir( OUT1 , PINDIR_OUTPUT);
	SetPinDir( OUT2 , PINDIR_OUTPUT);
	SetPinDir( OUT3 , PINDIR_OUTPUT);
}
